# SpringCloud入门

##  单体应用存在的问题

传统开发模式下，绝大部分的Web应用都是采用单体架构（打包在一个项目里）的风格来进行构建的，这意味着Web应用是作为单个可部署的软件制品进行交付的，所有的接口、业务逻辑、持久层都被打包在一个Web应用中，并且部署在一台服务器上，这种开发模式会带来诸多不便，多团队协同开发的成本极高。

![image-20200502154147570](https://gitee.com/zero049/MyNoteImages/raw/master/image-20200502154147570.png)

- 随着业务的发展，开发变得越来越复杂。
- 修改、新增某个功能，需要对整个系统进行测试、重新部署。
- 一个模块出现问题，很可能导致整个系统崩溃。
- 多个开发团队同时对数据进行管理，容易产生安全漏洞。
- 各个模块使用同一种技术进行开发，各个模块很难根据实际情况选择更合适的技术框架，局限性很大。
- 模块内容过于复杂，如果员工离职，可能需要很长时间才能完成工作交接。

分布式、集群

集群：一台服务器无法负荷高并发的数据访问量，那么就设置十台服务器一起分担压力，十台不行就设置一百台（物理层面）。很多人干同一件事情，来分摊压力。（运维）

分布式：将一个复杂问题拆分成若干个简单的小问题，将一个大型的项目架构拆分成若干个微服务来协同完成。（软件设计层面）。将一个庞大的工作拆分成若干个小步骤，分别由不同的人完成这些小步骤，最终将所有的结果进行整合实现大的需求。（开发）

![image-20200502195410086](https://gitee.com/zero049/MyNoteImages/raw/master/image-20200502195410086.png)

##  微服务架构

优点：

- 各个服务的开发、测试、部署都相互独立，比如用户服务就可以拆分作为一个单独的服务，而它的开发也不用依赖于其他服务，如果用户量很大，我们可以很容易的对其进行负载。
- 当一个新需求出现时，特别是在一个庞大的项目系统中，你得去考虑各方的问题，兼容性、影响度等等，而使用微服务则可以直接跳过这些废时又烧脑的环节。
- 使用微服务将项目进行拆分之后，各服务之间就消除了诸多限制，只需要保证对外提供的接口正常可用，至于使用什么语言、什么框架通通不用关心。

![image-20200502200228542](https://gitee.com/zero049/MyNoteImages/raw/master/image-20200502200228542.png)

缺点：

- 上面我们提到微服务的拆分是基于业务的，不是我们随心所欲，想怎么拆就怎么拆的，那么问题来了，由谁来拆，怎么拆？这就给团队协作沟通带来了很多挑战。
- 当服务调用方需要使用某服务的接口时，首先需要找到该服务的提供方，通常在一个大公司中，这种场景是跨部门的，沟通成本可想而知。同时，如果服务的提供方需要对某个接口进行修改，也得和各个服务调用方进行沟通。
- 由于各个服务相互独立，它们的数据也是独立的，这就会带来一个问题，当调用多个服务接口来进行操作时，如何保证各个服务的数据一致性，这既是问题，也是难点。

框架对比

![image-20200502200443641](F:\Project\cscode\markdown\java\javaWeb\SpringCloud\pictures\image-20200502200443641.png)



## 什么是SpringCloud

Spring Cloud 完全基于Spring Boot，服务调用方式是基于RESTAPI，整合了各种成熟的产品和架构，同时基于Spring Boot也使得整体的开发、配置、部署都非常方便。

Spring系的产品集功能齐全、简单好用、性能优越、文档规范等等于一身，因此Spring Cloud还是微服务架构中一个十分优越的实现方案。

![image-20200502200811849](https://gitee.com/zero049/MyNoteImages/raw/master/image-20200502200811849.png)



## SpringCloud核心组件

- 服务治理 Eureka
- 服务通信Ribbon
- 服务通信Feign
- 服务网关Zuul
- 服务跟踪Zipkin
- 服务容错 Hystrix
- 服务配置 Config
- 服务监控Actuarot



![image-20200502201029160](https://gitee.com/zero049/MyNoteImages/raw/master/image-20200502201029160.png)



