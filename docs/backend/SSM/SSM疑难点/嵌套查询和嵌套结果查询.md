# Mybatis嵌套查询和嵌套结果查询

嵌套查询：association、Collection ，one Many中用的是select的另一个select语句，

嵌套结果：association、Collection ，用的是 一条sql连接语句完成

![img](H:\Desktop\新建文件夹\Blog\docs\pictures\20181221092811573.png)

嵌套查询的弊端：即嵌套查询的N+1问题
尽管嵌套查询大量的简化了存在关联关系的查询，但它的弊端也比较明显：即所谓的N+1问题。关联的嵌套查询显示得到一个结果集，然后根据这个结果集的每一条记录进行关联查询。
现在假设嵌套查询就一个（即resultMap 内部就一个association标签），现查询的结果集返回条数为N，那么关联查询语句将会被执行N次，加上自身返回结果集查询1次，共需要访问数据库N+1次。如果N比较大的话，这样的数据库访问消耗是非常大的！所以使用这种嵌套语句查询的使用者一定要考虑慎重考虑，确保N值不会很大。

对于关联结果的查询，只需要查询数据库一次，然后对结果的整合和组装全部放在了内存中。