# mysql架构介绍
## 概述
1. MySQL是一个关系型数据库管理系统，由瑞典1. MySQLAB公司开发，目前属于Oracle公司。
1. MySQL是一种关联数据库管理系统，将数据保存在不同的表中，而不是将所有数据放在一个大仓库内，这样就增加了速度并提高了灵活性。
1. Mysql是开源的，所以你不需要支付额外的费用。
1. Mysql支持大型的数据库。可以处理拥有上千万条记录的大型数据库。
1. MySQL使用标准的SQL数据语言形式。
1. Mysql可以允许于多个系统上，并且支持多种语言。这些编程语言包括C、C++、Python、Java、Perl、PHP、Eiffel、Ruby和Tcl等。
1. Mysql对PHP有很好的支持，PHP是目前最流行的Web开发语言。
1. MySQL支持大型数据库，支持5000万条记录的数据仓库，32位系统表文件最大可支持4GB，64位系统支持最大的表文件为8TB。
1. Mysql是可以定制的，采用了GPL协议，你可以修改源码来开发自己的Mysql系统。

## 高级mysql
* mysql内核
* sql优化攻城狮
* mysq服务器的优化
* 各种参数常量设定
* 查询语句优化
* 主从复制
* 软硬件升级
* 容灾备份
* sql编程

### 主要配置文件

* 二进制日志log-bin：主从复制
* 错误日志log-error：默认关闭
* 查询日志log：默认关闭
* 数据文件
* 如何配置

和其它数据库相比，MySQL有点与众不同，它的架构可以在多种不同场景中应用并发挥良好作用。主要体现在存储引擎的架构上，插件式的存储引擎架构将性询处理和其它的系统任务以及数据的存储提取相分离。这种架构可以根据业务的需求和实际需要选择合适的存储引擎。

<img src="./pictures/Annotation 2019-12-23 154737.png"  div align=center />

1.连接层
最上层是一些客户端和连接服务，包含本地sock通信和大多数基于客户端/服务端工具实现的类似于tcp/ip的通信。主要完成一些类似于连接处理、授权认证、及相关的安全方案。在该层上引入了线程池的概念，为通过认证安全接入的客户端提供线程。同样在该层上可以实现基于SSL的安全链接。服务器也会为安全接入的每个客户端验证它所具有的操作权限。
2.服务层
第二层架构主要完成大多少的核心服务功能，如SQL接口，并完成缓存的查询，SQL的分析和优化及部分内置函数的执行。所有跨存储引擎的功能也在这一层实现，如过程、函数等。在该层，服务器会解析查询并创建相应的内部解析树，并对其完成相应的优化如确定查询表的顺序，是否利用索引等，最后生成相应的执行操作。如果是select语句，服务器还会查询内部的缓存。如果缓存空间足够大，这样在解决大量读操作的环境中能够很好的提升系统的性能。

3.引擎层
存储引擎层，存储引擎真正的负责了MySQL中数据的存储和提取，服务器通过APl与存储引擎进行通信。不同的存储引擎具有的功能不同，这样我们可以根据自己的实际需要进行选取。后面介绍MyISAM和InnoDB

4.存储层
数据存储层，主要是将数据存储在运行于裸设备的文件系统之上，并完成与存储引翠的交互