# 7. 整数反转

给出一个 32 位的有符号整数，你需要将这个整数中每位上的数字进行反转。

示例 1:

```
输入: 123
输出: 321
```

 示例 2:

```
输入: -123
输出: -321
```

示例 3:

```
输入: 120
输出: 21
```


注意:

假设我们的环境只能存储得下 32 位的有符号整数，则其数值范围为 [−2^31^,  2^31^ − 1]。请根据这个假设，如果反转后整数溢出那么就返回 0。



## 方法：弹出和推入数字 & 溢出前进行检查

反转整数的方法可以与反转字符串进行类比。

我们重复弹出 x 的最后一位数字，并将它推入到 ans 的后面。最后， ans 将与 x 相反。

要在没有辅助堆栈 / 数组的帮助下 “弹出” 和 “推入” 数字，我们可以使用数学方法。

**但是，这种方法很危险，因为当temp=ans·10+pop时会导致溢出。那么溢出情况有以下三种**

首先整型的最大值为2147483647，最小值为-2,147,483,648

1、当本趟ans*10中，ans已经超过了214748364（往上）或-214748364（往下），即ans>214748364或ans<-214748364

2、当本趟ans=214748364，当弹出的tmp>7时，此时相加也会发生溢出，即pop>7

3、当本趟ans=-214748364，当弹出的tmp>7时，此时相加也会发生溢出，即pop<-8



这里对**取余知识**也要扩充，才能编写出更简洁的代码

定义1一般作为数学中的取余法则，即两个数取余，余数总是为正数。

- 举例：
  - 5%3=3x1+2，商为1，余数为2
  - (-5)%(-3)=(-3)x2+1，商为2，余数为1
  - 5%(-3)=(-3)x(-1)+2，商为-1，余数为2
  - (-5)%3=3x(-2)+1，商为-2，余数为1

定义2：如果a 与d 是整数，d 非零，那么余数 r 满足这样的关系：`a = qd + r , q 为整数，且0 ≤ |r| < |d|`。定义2取余的结果就会导致出现两个余数了，比如5%(-3) = `(-3)x(-1)+2` = `(-3)x(-2)-1`，所以这里的余数2和-1都满足定义。我们把2称为正余数，-1成为负余数。通常，当除以d 时，**即计算机中可以有正负余数，如果正余数为r1，负余数为r2，那么有r1 = r2 + d。**

- 所有语言和计算器都遵循了尽量**让商尽量靠近0的原则**，即5%(-3) 的结果为2而不是-1，(-5)%3的结果是-2而不是1。这样做的效果是让**两个异号的数取余之后的结果取决于分子的符号。**
- 举例：
  - 5%3，5=3x1+2，商为1，余数为2
  - -5%3，-5=-3x1-2，商为1，余数为-2
  - 5%-3，5=-3x(-1)+2，商为-1，余数为2
  - -5%3，-5=3x(-1)-2，商为-1，余数为-2

**通俗地解释编译器的运行结果：**

(-5%-3)编译器先将-3自动转换为正整数3，然后计算-(5%3)的结果，所以运算结果为-2。

(5%-3)编译器先将-3自动转换为正整数3，然后计算(5%3)的结果，所以运算结果为2。

(-5%3)编译器直接计算-(5%3)的结果，所以运算结果为-2。



代码

```java
class Solution {
    public int reverse(int x) {
        int ans = 0;

        while (x != 0) {
            int pop = x % 10;			// 弹出最后的数字
            x /= 10;
            if (ans > Integer.MAX_VALUE / 10 || (ans == Integer.MAX_VALUE && pop > 7)) {
                return 0;						// 如果不确定边界，也可以写pop > Integer.MAX_VALUE%10
            }
            if (ans < Integer.MIN_VALUE / 10 || (ans == Integer.MIN_VALUE && pop < -8)) {
                return 0;						// 如果不确定边界，也可以写pop < Integer.MIN_VALUE%10
            }
            ans = ans * 10 + pop;

        }
        return ans;
    }
}
```

